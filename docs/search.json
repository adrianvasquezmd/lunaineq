[{"path":"https://adrianvas1995.github.io/lunaineq/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Adrián Vázquez-Mejía. Author, maintainer. Oscar J. Mújica. Author. Antonio Sanhueza. Author.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Vázquez-Mejía , Mújica O, Sanhueza (2025). lunaineq: Tools Analyzing Health Inequality Metrics. R package version 0.1.0, https://adrianvas1995.github.io/lunaineq/, https://github.com/adrianvas1995/lunaineq.","code":"@Manual{,   title = {lunaineq: Tools for Analyzing Health Inequality Metrics},   author = {Adrián Vázquez-Mejía and Oscar J. Mújica and Antonio Sanhueza},   year = {2025},   note = {R package version 0.1.0, https://adrianvas1995.github.io/lunaineq/},   url = {https://github.com/adrianvas1995/lunaineq}, }"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Absolute inequality gap (two input modes) — ag_luna","title":"Absolute inequality gap (two input modes) — ag_luna","text":"Computes absolute inequality gap extreme social groups defined based numeric equity stratifier. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method, relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), approximates gap based weighted group means. function also provides automatic interpretations results four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Absolute inequality gap (two input modes) — ag_luna","text":"","code":"ag_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   grouping_method = NULL,   n_groups = NULL,   manual_breaks = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Absolute inequality gap (two input modes) — ag_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). grouping_method String defining group social stratifier: \"quantiles\", \"equal intervals\", \"manual intervals\", \"k-means\", \"hierarchical clustering\", \"bagging clustering\", \"fisher-jenks\", \"jenks\", \"maximum differences\". n_groups Integer ≥ 2 specifying number social groups create; ignored grouping_method = \"manual intervals\". manual_breaks Numeric vector defining custom cut points (e.g., c(20, 40) defines intervals 0–20, 20–40, 40+); used grouping_method = \"manual intervals\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level inequality estimates; default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Absolute inequality gap (two input modes) — ag_luna","text":"list following components: summary_table tibble inequality metric name (inequality_metric), estimated absolute gap (value), confidence interval bounds (ci_lower, ci_upper). interpretation Character string automatic interpretation result selected language. note Character string explanatory note selected language, based type health indicator. group_summary tibble summarizing indicator social group. Contains either weighted means (Mode B) raw counts denominators (Mode ). global_health_mean Overall mean health indicator: weighted average (Mode B) global rate (Mode ). data Final tibble used calculation, including processed variables groupings.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Absolute inequality gap (two input modes) — ag_luna","text":"cases, social stratifier grouped n_groups using selected method (e.g., quantiles), ensuring group 1 corresponds disadvantaged group last group advantaged (defined higher_ineq_is_favorable). absolute gap calculated difference health indicator \\(y\\) —defined mean value indicator within group— disadvantaged advantaged groups: \\(\\mathrm{AG} = y_{\\text{disadvantaged}} - y_{\\text{advantaged}}\\).","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"a-using-numerator-and-denominator-preferred-","dir":"Reference","previous_headings":"","what":"A) Using numerator and denominator (preferred)","title":"Absolute inequality gap (two input modes) — ag_luna","text":"health_numerator health_denominator provided (Mode ), function uses actual counts compute inequality gap confidence interval. Proportions: absolute gap calculated difference proportion events disadvantaged advantaged groups. Confidence intervals computed using PropCIs::diffscoreci(), implements score-based intervals difference two independent proportions. Rates: absolute gap computed rate difference two extreme groups. Counts assumed follow Poisson distribution, confidence intervals estimated using ratesci::scoreci(distrib = \"poi\", contrast = \"RD\"), uses score-based methods rate difference. Final results scaled rate_scaling_factor (e.g., 1,000 100,000). mode rely population weights: inference based actual event counts, making statistically robust.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"b-with-aggregated-indicator-weighted-by-population-approximate-","dir":"Reference","previous_headings":"","what":"B) With aggregated indicator weighted by population (approximate)","title":"Absolute inequality gap (two input modes) — ag_luna","text":"Based health_indicator population_weights, weighted group means health indicator calculated. Proportions: Wald-type CI difference proportions, n approximated using population_weights. Rates: Wald-type CI difference “scaled” rates; rate_scaling_factor used express result per 1,000/100,000. Warning: CIs may - overestimate variance sample sizes small, heterogeneity high, prior aggregation occurred; prefer mode feasible.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Absolute inequality gap (two input modes) — ag_luna","text":"Mode B developed alternative situations aggregated health indicators (e.g., proportions rates) available, disaggregated data (numerator denominator) accessible. Although Mode precise, Mode B still allows valid inequality comparisons summary data available.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Absolute inequality gap (two input modes) — ag_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Absolute inequality gap (two input modes) — ag_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C. Antonio Sanhueza, PhD (sanhueza@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/ag_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Absolute inequality gap (two input modes) — ag_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Health indicator: Rate. Suppose data1 with: #   maternal_deaths  = number of maternal deaths. #   live_births      = number of live births. #   ubn_percent      = % of population with at least one unmet basic need (higher = worse social status). data(data1) ag_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Absolute gap       60.7     39.4     83.8 #>  #> $interpretation #> [1] \"The absolute gap is 60.68, 95%CI [39.37; 83.83]. This indicates that the most disadvantaged group has 60.68 more events per 100,000 individuals in the base population than the most advantaged group. This difference is statistically significant.\" #>  #> $note #> [1] \"Note: The events correspond to the numerator and the base population to the denominator of the health indicator. Example: MMR.\" #>  #> $group_summary #> # A tibble: 4 × 4 #>   group health_numerator health_denominator health_indicator #>   <int>            <dbl>              <dbl>            <dbl> #> 1     1              108             101644            106.  #> 2     2              127             123737            103.  #> 3     3              120             142988             83.9 #> 4     4               91             199190             45.7 #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator health_numerator health_denominator equity_stratifier #>               <dbl>            <dbl>              <dbl>             <dbl> #>  1            125.                34              27183              60.3 #>  2            118.                15              12713              50   #>  3            134.                 8               5975              48.4 #>  4             89.5               17              18992              40   #>  5            106.                11              10357              37.5 #>  6            107.                12              11210              33.2 #>  7             72.3               11              15214              31.7 #>  8             66.7                3               4497              29.6 #>  9            118.                39              32938              29.4 #> 10            164.                 4               2433              29.4 #> # ℹ 15 more rows #> # ℹ 2 more variables: equity_stratifier_order <dbl>, group <int> #>   # Health indicator: Proportion. Suppose data2 with: #   skilled_births   = number of births attended by skilled personnel. #   total_births     = total number of births. #   ubn_index        = % of population with at least one unmet basic need (higher = worse social status). data(data2) ag_luna(   health_indicator_type    = \"proportion\",   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric  value ci_lower ci_upper #>   <chr>              <dbl>    <dbl>    <dbl> #> 1 Absolute gap      -0.237   -0.240   -0.235 #>  #> $interpretation #> [1] \"The absolute gap is -23.73 percentage points (pp), 95%CI [-24.01pp; -23.46pp]. This indicates that the health indicator in the most advantaged group is higher by 23.73 percentage points (pp) compared to the most disadvantaged group. This difference is statistically significant.\" #>  #> $note #> [1] \"Note: The value represents a proportion (e.g., deliveries attended by skilled health personnel).\" #>  #> $group_summary #> # A tibble: 4 × 4 #>   group health_numerator health_denominator health_indicator #>   <int>            <dbl>              <dbl>            <dbl> #> 1     1            75799             101644            0.746 #> 2     2            96347             123737            0.779 #> 3     3           126496             142988            0.885 #> 4     4           195811             199190            0.983 #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator health_numerator health_denominator equity_stratifier #>               <dbl>            <dbl>              <dbl>             <dbl> #>  1            0.568            15440              27183              60.3 #>  2            0.774             9840              12713              50   #>  3            0.878             5246               5975              48.4 #>  4            0.839            15934              18992              40   #>  5            0.613             6349              10357              37.5 #>  6            0.805             9024              11210              33.2 #>  7            0.918            13966              15214              31.7 #>  8            0.975             4385               4497              29.6 #>  9            0.658            21673              32938              29.4 #> 10            0.932             2268               2433              29.4 #> # ℹ 15 more rows #> # ℹ 2 more variables: equity_stratifier_order <dbl>, group <int> #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Suppose data1 with: #   mmr       = maternal mortality ratio per 100,000 live births. #   population = population weight of the unit of analysis. #   ubn_index = % of population with at least one unmet basic need. data(data1) ag_luna(   health_indicator_type    = \"rate\",   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Absolute gap       60.6     41.0     80.1 #>  #> $interpretation #> [1] \"The absolute gap is 60.55, 95%CI [41.04; 80.07]. This indicates that the most disadvantaged group has 60.55 more events per 100,000 individuals in the base population than the most advantaged group. This difference is statistically significant.\" #>  #> $note #> [1] \"Note: The events correspond to the numerator and the base population to the denominator of the health indicator. Example: MMR.\" #>  #> $group_summary #> # A tibble: 4 × 3 #>   group health_indicator population_weights #>   <int>            <dbl>              <dbl> #> 1     1            106.              100931 #> 2     2            103.              122821 #> 3     3             83.9             142103 #> 4     4             45.7             196944 #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 5 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            125.               60.3              27019                   -60.3 #>  2            118.               50                12620                   -50   #>  3            134.               48.4               5920                   -48.4 #>  4             89.5              40                18864                   -40   #>  5            106.               37.5              10315                   -37.5 #>  6            107.               33.2              11087                   -33.2 #>  7             72.3              31.7              15106                   -31.7 #>  8             66.7              29.6               4477                   -29.6 #>  9            118.               29.4              32682                   -29.4 #> 10            164.               29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 1 more variable: group <int> #>   # Suppose data2 with: #   skilled_births_prop = proportion of births attended by skilled personnel (in [0,1]). #   population           = population weight of the unit of analysis. #   ubn_index            = % of population with at least one unmet basic need. data(data2) ag_luna(   health_indicator_type    = \"proportion\",   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric  value ci_lower ci_upper #>   <chr>              <dbl>    <dbl>    <dbl> #> 1 Absolute gap      -0.237   -0.240   -0.235 #>  #> $interpretation #> [1] \"The absolute gap is -23.74 percentage points (pp), 95%CI [-24.01pp; -23.46pp]. This indicates that the health indicator in the most advantaged group is higher by 23.74 percentage points (pp) compared to the most disadvantaged group. This difference is statistically significant.\" #>  #> $note #> [1] \"Note: The value represents a proportion (e.g., deliveries attended by skilled health personnel).\" #>  #> $group_summary #> # A tibble: 4 × 3 #>   group health_indicator population_weights #>   <int>            <dbl>              <dbl> #> 1     1            0.746             100931 #> 2     2            0.779             122821 #> 3     3            0.885             142103 #> 4     4            0.983             196944 #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 5 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            0.568              60.3              27019                   -60.3 #>  2            0.774              50                12620                   -50   #>  3            0.878              48.4               5920                   -48.4 #>  4            0.839              40                18864                   -40   #>  5            0.613              37.5              10315                   -37.5 #>  6            0.805              33.2              11087                   -33.2 #>  7            0.918              31.7              15106                   -31.7 #>  8            0.975              29.6               4477                   -29.6 #>  9            0.658              29.4              32682                   -29.4 #> 10            0.932              29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 1 more variable: group <int> #>"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Relative inequality gap (two input modes) — rg_luna","title":"Relative inequality gap (two input modes) — rg_luna","text":"Computes relative inequality gap extreme social groups defined based numeric equity stratifier. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method, relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), approximates gap based weighted group means. function also provides automatic interpretations results four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relative inequality gap (two input modes) — rg_luna","text":"","code":"rg_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   grouping_method = NULL,   n_groups = NULL,   manual_breaks = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relative inequality gap (two input modes) — rg_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). grouping_method String defining group social stratifier: \"quantiles\", \"equal intervals\", \"manual intervals\", \"k-means\", \"hierarchical clustering\", \"bagging clustering\", \"fisher-jenks\", \"jenks\", \"maximum differences\". n_groups Integer ≥ 2 specifying number social groups create; ignored grouping_method = \"manual intervals\". manual_breaks Numeric vector defining custom cut points (e.g., c(20, 40) defines intervals 0–20, 20–40, 40+); used grouping_method = \"manual intervals\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level inequality estimates; default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Relative inequality gap (two input modes) — rg_luna","text":"list following components: summary_table tibble inequality metric name (inequality_metric), estimated relative gap (value), confidence interval bounds (ci_lower, ci_upper). interpretation Character string automatic interpretation result selected language. note Character string explanatory note selected language, based type health indicator. group_summary tibble summarizing indicator social group. Contains either weighted means (Mode B) raw counts denominators (Mode ). global_health_mean Overall mean health indicator: weighted average (Mode B) global rate (Mode ). data Final tibble used calculation, including processed variables groupings.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Relative inequality gap (two input modes) — rg_luna","text":"cases, social stratifier grouped n_groups using selected method (e.g., quantiles), ensuring group 1 corresponds disadvantaged group last group advantaged (defined higher_ineq_is_favorable). relative gap calculated ratio health indicator \\(y\\) —defined mean value indicator within group— disadvantaged advantaged groups: \\(\\mathrm{RG} = y_{\\text{disadvantaged}} / y_{\\text{advantaged}}\\).","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"a-using-numerator-and-denominator-preferred-","dir":"Reference","previous_headings":"","what":"A) Using numerator and denominator (preferred)","title":"Relative inequality gap (two input modes) — rg_luna","text":"health_numerator health_denominator provided (Mode ), function uses actual event counts compute relative inequality gap confidence interval. Proportions: function computes ratio proportions events disadvantaged advantaged groups. Confidence intervals estimated using epitools::riskratio(), implements score-based methods risk ratios (relative risks) 2x2 tables. Rates: function computes rate ratio two extreme groups. assumes Poisson-distributed event counts, confidence intervals estimated using ratesci::scoreci() distrib = \"poi\" contrast = \"RR\", applies skewed score-based method rate ratios. mode rely population weights; inference based directly count-level data, yielding robust reliable results.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"b-with-aggregated-indicator-weighted-by-population-approximate-","dir":"Reference","previous_headings":"","what":"B) With aggregated indicator weighted by population (approximate)","title":"Relative inequality gap (two input modes) — rg_luna","text":"aggregate indicators population weights available (Mode B), function approximates relative gap confidence interval using group-level means. Proportions: function computes ratio weighted group means. confidence interval estimated using log-transformed Wald method independent proportions. Rates: function computes rate ratio using estimated event counts derived scaled rate population. confidence interval computed using Wald approximation log scale. Warning: approach assumes independence large sample sizes; may underestimate overestimate variability, particularly presence aggregation, small counts, heterogeneity. Use Mode possible.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Relative inequality gap (two input modes) — rg_luna","text":"Mode B developed alternative situations aggregated health indicators (e.g., proportions rates) available, disaggregated data (numerator denominator) accessible. Although Mode precise, Mode B still allows valid inequality comparisons summary data available.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Relative inequality gap (two input modes) — rg_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Relative inequality gap (two input modes) — rg_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C. Antonio Sanhueza, PhD (sanhueza@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rg_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Relative inequality gap (two input modes) — rg_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Health indicator: Rate. Suppose data1 with: #   maternal_deaths  = number of maternal deaths. #   live_births      = number of live births. #   ubn_percent      = % of population with at least one unmet basic need (higher = worse social status). data(data1) rg_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Relative gap       2.33     1.76     3.08 #>  #> $interpretation #> [1] \"The relative gap is 2.33, 95%CI [1.76; 3.08]. This indicates that the health indicator in the most disadvantaged group is 2.33 times the number of events per 100,000 individuals of the base population compared to the most advantaged group. This ratio is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator of the health indicator. Example: RMM.\" #>  #> $group_summary #> # A tibble: 4 × 4 #>   group health_numerator health_denominator health_indicator #>   <int>            <dbl>              <dbl>            <dbl> #> 1     1              108             101644            106.  #> 2     2              127             123737            103.  #> 3     3              120             142988             83.9 #> 4     4               91             199190             45.7 #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator health_numerator health_denominator equity_stratifier #>               <dbl>            <dbl>              <dbl>             <dbl> #>  1            125.                34              27183              60.3 #>  2            118.                15              12713              50   #>  3            134.                 8               5975              48.4 #>  4             89.5               17              18992              40   #>  5            106.                11              10357              37.5 #>  6            107.                12              11210              33.2 #>  7             72.3               11              15214              31.7 #>  8             66.7                3               4497              29.6 #>  9            118.                39              32938              29.4 #> 10            164.                 4               2433              29.4 #> # ℹ 15 more rows #> # ℹ 2 more variables: equity_stratifier_order <dbl>, group <int> #>   # Health indicator: Proportion. Suppose data2 with: #   skilled_births   = number of births attended by skilled personnel. #   total_births     = total number of births. #   ubn_index        = % of population with at least one unmet basic need (higher = worse social status). rg_luna(   health_indicator_type    = \"proportion\",   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Relative gap      0.759    0.756    0.761 #>  #> $interpretation #> [1] \"The relative gap is 75.86%, 95%CI [75.58%; 76.14%]. This indicates that the health indicator in the most disadvantaged group is 75.86% of the most advantaged group. This is equivalent to the most advantaged group having 1.32 times the health indicator of the most disadvantaged group. This ratio is statistically significant.\" #>  #> $note #> [1] \"Note: The value represents a proportion (for example, births attended by qualified personnel).\" #>  #> $group_summary #> # A tibble: 4 × 4 #>   group health_numerator health_denominator health_indicator #>   <int>            <dbl>              <dbl>            <dbl> #> 1     1            75799             101644            0.746 #> 2     2            96347             123737            0.779 #> 3     3           126496             142988            0.885 #> 4     4           195811             199190            0.983 #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator health_numerator health_denominator equity_stratifier #>               <dbl>            <dbl>              <dbl>             <dbl> #>  1            0.568            15440              27183              60.3 #>  2            0.774             9840              12713              50   #>  3            0.878             5246               5975              48.4 #>  4            0.839            15934              18992              40   #>  5            0.613             6349              10357              37.5 #>  6            0.805             9024              11210              33.2 #>  7            0.918            13966              15214              31.7 #>  8            0.975             4385               4497              29.6 #>  9            0.658            21673              32938              29.4 #> 10            0.932             2268               2433              29.4 #> # ℹ 15 more rows #> # ℹ 2 more variables: equity_stratifier_order <dbl>, group <int> #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Suppose data1 with: #   mmr       = maternal mortality ratio per 100,000 live births. #   population = population weight of the unit of analysis. #   ubn_index = % of population with at least one unmet basic need. rg_luna(   health_indicator_type    = \"rate\",   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Relative gap       2.33     1.76     3.08 #>  #> $interpretation #> [1] \"The relative gap is 2.33, 95%CI [1.76; 3.08]. This indicates that the health indicator in the most disadvantaged group is 2.33 times the number of events per 100,000 individuals of the base population compared to the most advantaged group. This ratio is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator of the health indicator. Example: RMM.\" #>  #> $group_summary #> # A tibble: 4 × 3 #>   group health_indicator population_weights #>   <int>            <dbl>              <dbl> #> 1     1            106.              100931 #> 2     2            103.              122821 #> 3     3             83.9             142103 #> 4     4             45.7             196944 #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 5 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            125.               60.3              27019                   -60.3 #>  2            118.               50                12620                   -50   #>  3            134.               48.4               5920                   -48.4 #>  4             89.5              40                18864                   -40   #>  5            106.               37.5              10315                   -37.5 #>  6            107.               33.2              11087                   -33.2 #>  7             72.3              31.7              15106                   -31.7 #>  8             66.7              29.6               4477                   -29.6 #>  9            118.               29.4              32682                   -29.4 #> 10            164.               29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 1 more variable: group <int> #>   # Suppose data2 with: #   skilled_births_prop = proportion of births attended by skilled personnel (in [0,1]). #   population           = population weight of the unit of analysis. #   ubn_index            = % of population with at least one unmet basic need. rg_luna(   health_indicator_type    = \"proportion\",   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   grouping_method          = \"quantiles\",   n_groups                 = 4,   conf_level               = 0.95,   language_interpretation = \"en\" ) #> $summary_table #> # A tibble: 1 × 4 #>   inequality_metric value ci_lower ci_upper #>   <chr>             <dbl>    <dbl>    <dbl> #> 1 Relative gap      0.759    0.756    0.761 #>  #> $interpretation #> [1] \"The relative gap is 75.85%, 95%CI [75.57%; 76.13%]. This indicates that the health indicator in the most disadvantaged group is 75.85% of the most advantaged group. This is equivalent to the most advantaged group having 1.32 times the health indicator of the most disadvantaged group. This ratio is statistically significant.\" #>  #> $note #> [1] \"Note: The value represents a proportion (for example, births attended by qualified personnel).\" #>  #> $group_summary #> # A tibble: 4 × 3 #>   group health_indicator population_weights #>   <int>            <dbl>              <dbl> #> 1     1            0.746             100931 #> 2     2            0.779             122821 #> 3     3            0.885             142103 #> 4     4            0.983             196944 #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 5 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            0.568              60.3              27019                   -60.3 #>  2            0.774              50                12620                   -50   #>  3            0.878              48.4               5920                   -48.4 #>  4            0.839              40                18864                   -40   #>  5            0.613              37.5              10315                   -37.5 #>  6            0.805              33.2              11087                   -33.2 #>  7            0.918              31.7              15106                   -31.7 #>  8            0.975              29.6               4477                   -29.6 #>  9            0.658              29.4              32682                   -29.4 #> 10            0.932              29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 1 more variable: group <int> #>"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Relative index of inequality (two input modes) — rii_luna","title":"Relative index of inequality (two input modes) — rii_luna","text":"Computes Relative Index Inequality (RII) extreme social groups defined based numeric equity stratifier. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method, relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), approximates index based weighted group means. function also provides automatic interpretations results four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relative index of inequality (two input modes) — rii_luna","text":"","code":"rii_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   models = NULL,   model_evaluation_metric = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relative index of inequality (two input modes) — rii_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). models Character vector specifying regression models evaluate; proportions: default c(\"binomial\", \"linear logit(y)\") (Mode ) c(\"quasibinomial\", \"linear logit(y)\") (Mode B), allowed models include \"linear\", \"linear ln(y)\", \"linear logit(y)\", \"binomial\", \"quasibinomial\"; rates: default c(\"poisson\", \"negative binomial\") (Mode ) c(\"linear ln(y)\") (Mode B), allowed models include \"linear\", \"linear ln(y)\", \"poisson\", \"negative binomial\". model_evaluation_metric Character string defining metric best model selection; allowed values: \"MAE\", \"MSE\", \"RMSE\", \"MAPE\", \"AIC\"; default \"MSE\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level inequality estimates; default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Relative index of inequality (two input modes) — rii_luna","text":"list components: summary_table tibble inequality_metric, selected_model, estimate, ci_lower, ci_upper. interpretation Character: automatic interpretation selected language. note Character: explanatory note/alerts selected language. global_health_mean Numeric: overall mean health indicator (weighted derived num/den). data tibble used calculations. Contains least: health_indicator, equity_stratifier, pop_use, social_position (ridit), fitted prediction columns candidate models, final_model_pred. data_with_extremes data.frame / tibble appends extreme social positions (0 1) predicted values (emmeans). Useful plotting extremes.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Relative index of inequality (two input modes) — rii_luna","text":"cases, social stratifier transformed relative social position (ridit) ranging 0 (disadvantaged) 1 (advantaged), ensuring position 0 corresponds disadvantaged position 1 advantaged (defined higher_ineq_is_favorable). RII calculated relative difference health indicator \\(y\\) —predicted regression model two extremes— disadvantaged advantaged positions: \\(\\mathrm{RII} = \\hat{y}_{\\text{advantaged}} / \\hat{y}_{\\text{disadvantaged}}\\).","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"a-using-numerator-and-denominator-preferred-","dir":"Reference","previous_headings":"","what":"A) Using numerator and denominator (preferred)","title":"Relative index of inequality (two input modes) — rii_luna","text":"method calculates health indicator directly event counts denominators, ensuring statistical robustness. Proportions: RII computed using binomial, linear logit-linear regression models. Rates: RII estimated Poisson, negative binomial, log-linear regression models, scaled rate_scaling_factor. mode require population weights: estimates based observed event counts.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"b-using-aggregated-indicator-and-population-weights-approximate-","dir":"Reference","previous_headings":"","what":"B) Using aggregated indicator and population weights (approximate)","title":"Relative index of inequality (two input modes) — rii_luna","text":"method approximates RII based weighted means. Proportions: Quasibinomial logit-linear models used. Rates: Linear log-linear regression models weights applied. Warning: Results may biased using small samples aggregated data. Prefer Mode possible.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Relative index of inequality (two input modes) — rii_luna","text":"Mode B designed cases summary indicators population weights available. However, Mode used whenever individual counts accessible, yields accurate robust estimates.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Relative index of inequality (two input modes) — rii_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Relative index of inequality (two input modes) — rii_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C. Antonio Sanhueza, PhD (sanhueza@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rii_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Relative index of inequality (two input modes) — rii_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Example with a rate indicator (e.g., maternal mortality ratio) data(data1) rii_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   models = c('poisson', 'negative binomial'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                    inequality_metric    selected_model  estimate  ci_lower #> 1 Relative index of inequality (RII) negative binomial 0.3602192 0.2401015 #>    ci_upper #> 1 0.5404293 #>  #> $interpretation #> [1] \"The Relative Index of Inequality is 36.02%, 95%CI [24.01%; 54.04%]. This means that the Health Indicator is higher in the most disadvantaged group. In relative terms, the most advantaged group has 36.02% of the number of events per 100,000 individuals in the reference population compared to the most disadvantaged group. Moreover, this relationship is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator. The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 12 #>    health_indicator equity_stratifier health_numerator health_denominator #>               <dbl>             <dbl>            <dbl>              <dbl> #>  1            125.               60.3               34              27183 #>  2            118.               50                 15              12713 #>  3            134.               48.4                8               5975 #>  4             89.5              40                 17              18992 #>  5            106.               37.5               11              10357 #>  6            107.               33.2               12              11210 #>  7             72.3              31.7               11              15214 #>  8             66.7              29.6                3               4497 #>  9            118.               29.4               39              32938 #> 10            164.               29.4                4               2433 #> # ℹ 15 more rows #> # ℹ 8 more variables: equity_stratifier_order <dbl>, pop_use <dbl>, #> #   social_position <dbl>, pred_model_poisson <dbl>, pred_model_negbin <dbl>, #> #   pred_model_linear <dbl>, pred_model_linear_lny <dbl>, #> #   final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        126.05426 #> 2       0.02394729        125.07817        123.00946 #> 3       0.05909430        117.98946        118.67334 #> 4       0.07555778        133.89121        116.69513 #> 5       0.09755285         89.51137        114.10361 #> 6       0.12340832        106.20836        111.13074 #> 7       0.14240810        107.04728        108.99563 #> 8       0.16568674         72.30183        106.43551 #> 9       0.18305145         66.71114        104.56503 #> 10      0.21817379        118.40427        100.88162 #> 11      0.21817379        164.40608        100.88162 #> 12      0.28203676         88.89847         94.51334 #> 13      0.33072244         77.16475         89.92993 #> 14      0.37190583        118.86034         86.22678 #> 15      0.41799883         84.33125         82.26271 #> 16      0.44774640         39.79704         79.80167 #> 17      0.47986112         90.89876         77.22737 #> 18      0.52331123         78.54088         73.87611 #> 19      0.56427966         72.07666         70.84958 #> 20      0.61704950        101.88908         67.13320 #> 21      0.66856221         49.64123         63.69347 #> 22      0.70297537         35.49456         61.49432 #> 23      0.72030044         72.41130         60.41607 #> 24      0.72768734         53.35230         59.96211 #> 25      0.85191584         42.83889         52.81896 #> 26      0.98559533         67.27417         46.07994 #> 27      1.00000000               NA         45.40717 #>   # Example with a proportion indicator (e.g., skilled birth attendance) data(data2) rii_luna(   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"proportion\",   models = c('binomial', 'linear logit(y)'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                    inequality_metric selected_model estimate ci_lower ci_upper #> 1 Relative index of inequality (RII)       binomial 1.558146 1.292264 1.878735 #>  #> $interpretation #> [1] \"The Relative Index of Inequality is 1.56, 95%CI [1.29; 1.88]. This means that the Health Indicator is higher in the most advantaged group. In relative terms, the value in the most advantaged group is 1.56 times that of the most disadvantaged group. Moreover, this relationship is statistically significant.\" #>  #> $note #> [1] \"Note: Indicator expressed as proportions (0–1). The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 13 #>    health_indicator equity_stratifier health_numerator health_denominator #>               <dbl>             <dbl>            <dbl>              <dbl> #>  1            0.568              60.3            15440              27183 #>  2            0.774              50               9840              12713 #>  3            0.878              48.4             5246               5975 #>  4            0.839              40              15934              18992 #>  5            0.613              37.5             6349              10357 #>  6            0.805              33.2             9024              11210 #>  7            0.918              31.7            13966              15214 #>  8            0.975              29.6             4385               4497 #>  9            0.658              29.4            21673              32938 #> 10            0.932              29.4             2268               2433 #> # ℹ 15 more rows #> # ℹ 9 more variables: equity_stratifier_order <dbl>, pop_use <dbl>, #> #   social_position <dbl>, pred_model_binomial <dbl>, pred_model_quasi <dbl>, #> #   pred_model_linear <dbl>, pred_model_linear_lny <dbl>, #> #   pred_model_linear_logit <dbl>, final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        0.6298794 #> 2       0.02394729        0.5680021        0.6488517 #> 3       0.05909430        0.7740109        0.6758533 #> 4       0.07555778        0.8779916        0.6881228 #> 5       0.09755285        0.8389848        0.7041096 #> 6       0.12340832        0.6130154        0.7222798 #> 7       0.14240810        0.8049955        0.7351853 #> 8       0.16568674        0.9179703        0.7504644 #> 9       0.18305145        0.9750945        0.7614717 #> 10      0.21817379        0.6579938        0.7826990 #> 11      0.21817379        0.9321825        0.7826990 #> 12      0.28203676        0.8039923        0.8177136 #> 13      0.33072244        0.9280163        0.8413416 #> 14      0.37190583        0.7459885        0.8593344 #> 15      0.41799883        0.8449992        0.8774148 #> 16      0.44774640        0.9740324        0.8879931 #> 17      0.47986112        0.9409916        0.8985090 #> 18      0.52331123        0.8879920        0.9113382 #> 19      0.56427966        0.8720003        0.9220747 #> 20      0.61704950        0.8509941        0.9341478 #> 21      0.66856221        0.9410172        0.9442360 #> 22      0.70297537        0.9920137        0.9501457 #> 23      0.72030044        0.9551050        0.9528916 #> 24      0.72768734        0.9800818        0.9540181 #> 25      0.85191584        0.9883966        0.9695088 #> 26      0.98559533        0.9920494        0.9805210 #> 27      1.00000000               NA        0.9814444 #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Example with rate indicator data(data1) rii_luna(   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"rate\",   models = c('linear ln(y)'),   model_evaluation_metric = 'MSE',   rate_scaling_factor      = 100000,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                    inequality_metric selected_model  estimate  ci_lower #> 1 Relative index of inequality (RII)   linear ln(y) 0.3197676 0.2169331 #>    ci_upper #> 1 0.4713494 #>  #> $interpretation #> [1] \"The Relative Index of Inequality is 31.98%, 95%CI [21.69%; 47.13%]. This means that the Health Indicator is higher in the most disadvantaged group. In relative terms, the most advantaged group has 31.98% of the number of events per 100,000 individuals in the reference population compared to the most disadvantaged group. Moreover, this relationship is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator. The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 11 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            125.               60.3              27019                   -60.3 #>  2            118.               50                12620                   -50   #>  3            134.               48.4               5920                   -48.4 #>  4             89.5              40                18864                   -40   #>  5            106.               37.5              10315                   -37.5 #>  6            107.               33.2              11087                   -33.2 #>  7             72.3              31.7              15106                   -31.7 #>  8             66.7              29.6               4477                   -29.6 #>  9            118.               29.4              32682                   -29.4 #> 10            164.               29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 7 more variables: pop_use <dbl>, social_position <dbl>, #> #   pred_model_poisson <dbl>, pred_model_negbin <dbl>, pred_model_linear <dbl>, #> #   pred_model_linear_lny <dbl>, final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        128.42651 #> 2       0.02400413        125.07817        124.95932 #> 3       0.05922008        117.98946        120.04137 #> 4       0.07569132        133.89121        117.80804 #> 5       0.09770984         89.51137        114.88733 #> 6       0.12363295        106.20836        111.54135 #> 7       0.14264684        107.04728        109.14928 #> 8       0.16591714         72.30183        106.29142 #> 9       0.18331500         66.71114        104.20376 #> 10      0.21845899        118.40427        100.11089 #> 11      0.21845899        164.40608        100.11089 #> 12      0.28231926         88.89847         93.08075 #> 13      0.33096718         77.16475         88.05847 #> 14      0.37224569        118.86034         84.01008 #> 15      0.41852775         84.33125         79.69189 #> 16      0.44839543         39.79704         77.02375 #> 17      0.48058632         90.89876         74.24802 #> 18      0.52409386         78.54088         70.65476 #> 19      0.56515026         72.07666         67.42356 #> 20      0.61802171        101.88908         63.47922 #> 21      0.66964316         49.64123         59.85086 #> 22      0.70409507         35.49456         57.54545 #> 23      0.72140587         72.41130         56.42081 #> 24      0.72881260         53.35230         55.94635 #> 25      0.85247397         42.83889         48.58910 #> 26      0.98558366         67.27417         41.74722 #> 27      1.00000000               NA         41.06663 #>   # Example with proportion indicator data(data2) rii_luna(   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"proportion\",   models = c('quasibinomial', 'linear logit(y)'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                    inequality_metric selected_model estimate ci_lower ci_upper #> 1 Relative index of inequality (RII)  quasibinomial 1.557972 1.291993 1.878706 #>  #> $interpretation #> [1] \"The Relative Index of Inequality is 1.56, 95%CI [1.29; 1.88]. This means that the Health Indicator is higher in the most advantaged group. In relative terms, the value in the most advantaged group is 1.56 times that of the most disadvantaged group. Moreover, this relationship is statistically significant.\" #>  #> $note #> [1] \"Note: Indicator expressed as proportions (0–1). The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 12 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            0.568              60.3              27019                   -60.3 #>  2            0.774              50                12620                   -50   #>  3            0.878              48.4               5920                   -48.4 #>  4            0.839              40                18864                   -40   #>  5            0.613              37.5              10315                   -37.5 #>  6            0.805              33.2              11087                   -33.2 #>  7            0.918              31.7              15106                   -31.7 #>  8            0.975              29.6               4477                   -29.6 #>  9            0.658              29.4              32682                   -29.4 #> 10            0.932              29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 8 more variables: pop_use <dbl>, social_position <dbl>, #> #   pred_model_binomial <dbl>, pred_model_quasi <dbl>, pred_model_linear <dbl>, #> #   pred_model_linear_lny <dbl>, pred_model_linear_logit <dbl>, #> #   final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        0.6298757 #> 2       0.02400413           0.5680        0.6488580 #> 3       0.05922008           0.7740        0.6758624 #> 4       0.07569132           0.8780        0.6881150 #> 5       0.09770984           0.8390        0.7040898 #> 6       0.12363295           0.6130        0.7222744 #> 7       0.14264684           0.8050        0.7351661 #> 8       0.16591714           0.9180        0.7504129 #> 9       0.18331500           0.9751        0.7614225 #> 10      0.21845899           0.6580        0.7826278 #> 11      0.21845899           0.9322        0.7826278 #> 12      0.28231926           0.8040        0.8175895 #> 13      0.33096718           0.9280        0.8411719 #> 14      0.37224569           0.7460        0.8591887 #> 15      0.41852775           0.8450        0.8773236 #> 16      0.44839543           0.9740        0.8879309 #> 17      0.48058632           0.9410        0.8984573 #> 18      0.52409386           0.8880        0.9112861 #> 19      0.56515026           0.8720        0.9220314 #> 20      0.61802171           0.8510        0.9341116 #> 21      0.66964316           0.9410        0.9442075 #> 22      0.70409507           0.9920        0.9501160 #> 23      0.72140587           0.9551        0.9528563 #> 24      0.72881260           0.9801        0.9539846 #> 25      0.85247397           0.9884        0.9694053 #> 26      0.98558366           0.9920        0.9804004 #> 27      1.00000000               NA        0.9813284 #>"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Slope index of inequality (two input modes) — sii_luna","title":"Slope index of inequality (two input modes) — sii_luna","text":"Computes Slope Index Inequality (SII) extreme social groups defined based numeric equity stratifier. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method, relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), approximates index based weighted group means. function also provides automatic interpretations results four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Slope index of inequality (two input modes) — sii_luna","text":"","code":"sii_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   models = NULL,   model_evaluation_metric = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Slope index of inequality (two input modes) — sii_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). models Character vector specifying regression models evaluate; proportions: default c(\"binomial\", \"linear logit(y)\") (Mode ) c(\"quasibinomial\", \"linear logit(y)\") (Mode B), allowed models include \"linear\", \"linear ln(y)\", \"linear logit(y)\", \"binomial\", \"quasibinomial\"; rates: default c(\"poisson\", \"negative binomial\") (Mode ) c(\"linear ln(y)\") (Mode B), allowed models include \"linear\", \"linear ln(y)\", \"poisson\", \"negative binomial\". model_evaluation_metric Character string defining metric best model selection; allowed values: \"MAE\", \"MSE\", \"RMSE\", \"MAPE\", \"AIC\"; default \"MSE\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level inequality estimates; default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Slope index of inequality (two input modes) — sii_luna","text":"list components: summary_table tibble inequality_metric, selected_model, estimate, ci_lower, ci_upper. interpretation Character: automatic interpretation selected language. note Character: explanatory note/alerts selected language. global_health_mean Numeric: overall mean health indicator (weighted derived num/den). data tibble used calculations. Contains least: health_indicator, equity_stratifier, pop_use, social_position (ridit), fitted prediction columns candidate models, final_model_pred. data_with_extremes data.frame / tibble appends extreme social positions (0 1) predicted values (emmeans). Useful plotting extremes.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Slope index of inequality (two input modes) — sii_luna","text":"cases, social stratifier transformed relative social position (ridit) ranging 0 (disadvantaged) 1 (advantaged), ensuring position 0 corresponds disadvantaged position 1 advantaged (defined higher_ineq_is_favorable). SII calculated absolute difference health indicator \\(y\\) —predicted regression model two extremes— disadvantaged advantaged positions: \\(\\mathrm{SII} = \\hat{y}_{\\text{disadvantaged}} - \\hat{y}_{\\text{advantaged}}\\).","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"a-using-numerator-and-denominator-preferred-","dir":"Reference","previous_headings":"","what":"A) Using numerator and denominator (preferred)","title":"Slope index of inequality (two input modes) — sii_luna","text":"method calculates health indicator directly event counts denominators, ensuring statistical robustness. Proportions: SII computed using binomial, linear logit-linear regression models. Rates: SII estimated Poisson, negative binomial, log-linear regression models, scaled rate_scaling_factor. mode require population weights: estimates based observed event counts.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"b-using-aggregated-indicator-and-population-weights-approximate-","dir":"Reference","previous_headings":"","what":"B) Using aggregated indicator and population weights (approximate)","title":"Slope index of inequality (two input modes) — sii_luna","text":"method approximates SII based weighted means. Proportions: Quasibinomial logit-linear models used. Rates: Linear log-linear regression models weights applied. Warning: Results may biased using small samples aggregated data. Prefer Mode possible.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Slope index of inequality (two input modes) — sii_luna","text":"Mode B designed cases summary indicators population weights available. However, Mode used whenever individual counts accessible, yields accurate robust estimates.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Slope index of inequality (two input modes) — sii_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Slope index of inequality (two input modes) — sii_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C. Antonio Sanhueza, PhD (sanhueza@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/sii_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Slope index of inequality (two input modes) — sii_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Example with a rate indicator (e.g., maternal mortality ratio) data(data1) sii_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   models = c('poisson', 'negative binomial'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                 inequality_metric    selected_model  estimate  ci_lower #> 1 Slope index of inequality (SII) negative binomial -80.64709 -108.7956 #>   ci_upper #> 1 -52.4986 #>  #> $interpretation #> [1] \"The Slope Index of Inequality is -80.65, 95%CI [-108.8; -52.5]. This means that the health indicator is higher at the most disadvantaged extreme. In absolute terms, the most disadvantaged extreme has 80.65 more events per 100,000 individuals of the base population compared to the most advantaged extreme. Additionally, this difference is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator. The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 12 #>    health_indicator equity_stratifier health_numerator health_denominator #>               <dbl>             <dbl>            <dbl>              <dbl> #>  1            125.               60.3               34              27183 #>  2            118.               50                 15              12713 #>  3            134.               48.4                8               5975 #>  4             89.5              40                 17              18992 #>  5            106.               37.5               11              10357 #>  6            107.               33.2               12              11210 #>  7             72.3              31.7               11              15214 #>  8             66.7              29.6                3               4497 #>  9            118.               29.4               39              32938 #> 10            164.               29.4                4               2433 #> # ℹ 15 more rows #> # ℹ 8 more variables: equity_stratifier_order <dbl>, pop_use <dbl>, #> #   social_position <dbl>, pred_model_poisson <dbl>, pred_model_negbin <dbl>, #> #   pred_model_linear <dbl>, pred_model_linear_lny <dbl>, #> #   final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        126.05426 #> 2       0.02394729        125.07817        123.00946 #> 3       0.05909430        117.98946        118.67334 #> 4       0.07555778        133.89121        116.69513 #> 5       0.09755285         89.51137        114.10361 #> 6       0.12340832        106.20836        111.13074 #> 7       0.14240810        107.04728        108.99563 #> 8       0.16568674         72.30183        106.43551 #> 9       0.18305145         66.71114        104.56503 #> 10      0.21817379        118.40427        100.88162 #> 11      0.21817379        164.40608        100.88162 #> 12      0.28203676         88.89847         94.51334 #> 13      0.33072244         77.16475         89.92993 #> 14      0.37190583        118.86034         86.22678 #> 15      0.41799883         84.33125         82.26271 #> 16      0.44774640         39.79704         79.80167 #> 17      0.47986112         90.89876         77.22737 #> 18      0.52331123         78.54088         73.87611 #> 19      0.56427966         72.07666         70.84958 #> 20      0.61704950        101.88908         67.13320 #> 21      0.66856221         49.64123         63.69347 #> 22      0.70297537         35.49456         61.49432 #> 23      0.72030044         72.41130         60.41607 #> 24      0.72768734         53.35230         59.96211 #> 25      0.85191584         42.83889         52.81896 #> 26      0.98559533         67.27417         46.07994 #> 27      1.00000000               NA         45.40717 #>   # Example with a proportion indicator (e.g., skilled birth attendance) data(data2) sii_luna(   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"proportion\",   models = c('binomial', 'linear logit(y)'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                 inequality_metric selected_model estimate ci_lower  ci_upper #> 1 Slope index of inequality (SII)       binomial 0.351565 0.230032 0.4730979 #>  #> $interpretation #> [1] \"The Slope Index of Inequality is 35.16 percentage points (pp), 95%CI [23pp; 47.31pp]. This means that the health indicator is higher at the most advantaged extreme. In absolute terms, the difference in the health indicator between the most advantaged extreme and the most disadvantaged extreme is 35.16 percentage points. Additionally, this difference is statistically significant.\" #>  #> $note #> [1] \"Note: Indicator in proportions (0-1). The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 13 #>    health_indicator equity_stratifier health_numerator health_denominator #>               <dbl>             <dbl>            <dbl>              <dbl> #>  1            0.568              60.3            15440              27183 #>  2            0.774              50               9840              12713 #>  3            0.878              48.4             5246               5975 #>  4            0.839              40              15934              18992 #>  5            0.613              37.5             6349              10357 #>  6            0.805              33.2             9024              11210 #>  7            0.918              31.7            13966              15214 #>  8            0.975              29.6             4385               4497 #>  9            0.658              29.4            21673              32938 #> 10            0.932              29.4             2268               2433 #> # ℹ 15 more rows #> # ℹ 9 more variables: equity_stratifier_order <dbl>, pop_use <dbl>, #> #   social_position <dbl>, pred_model_binomial <dbl>, pred_model_quasi <dbl>, #> #   pred_model_linear <dbl>, pred_model_linear_lny <dbl>, #> #   pred_model_linear_logit <dbl>, final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        0.6298794 #> 2       0.02394729        0.5680021        0.6488517 #> 3       0.05909430        0.7740109        0.6758533 #> 4       0.07555778        0.8779916        0.6881228 #> 5       0.09755285        0.8389848        0.7041096 #> 6       0.12340832        0.6130154        0.7222798 #> 7       0.14240810        0.8049955        0.7351853 #> 8       0.16568674        0.9179703        0.7504644 #> 9       0.18305145        0.9750945        0.7614717 #> 10      0.21817379        0.6579938        0.7826990 #> 11      0.21817379        0.9321825        0.7826990 #> 12      0.28203676        0.8039923        0.8177136 #> 13      0.33072244        0.9280163        0.8413416 #> 14      0.37190583        0.7459885        0.8593344 #> 15      0.41799883        0.8449992        0.8774148 #> 16      0.44774640        0.9740324        0.8879931 #> 17      0.47986112        0.9409916        0.8985090 #> 18      0.52331123        0.8879920        0.9113382 #> 19      0.56427966        0.8720003        0.9220747 #> 20      0.61704950        0.8509941        0.9341478 #> 21      0.66856221        0.9410172        0.9442360 #> 22      0.70297537        0.9920137        0.9501457 #> 23      0.72030044        0.9551050        0.9528916 #> 24      0.72768734        0.9800818        0.9540181 #> 25      0.85191584        0.9883966        0.9695088 #> 26      0.98559533        0.9920494        0.9805210 #> 27      1.00000000               NA        0.9814444 #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Example with rate indicator data(data1) sii_luna(   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"rate\",   models = c('linear ln(y)'),   model_evaluation_metric = 'MSE',   rate_scaling_factor      = 100000,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                 inequality_metric selected_model  estimate  ci_lower  ci_upper #> 1 Slope index of inequality (SII)   linear ln(y) -87.35988 -116.3941 -58.32567 #>  #> $interpretation #> [1] \"The Slope Index of Inequality is -87.36, 95%CI [-116.39; -58.33]. This means that the health indicator is higher at the most disadvantaged extreme. In absolute terms, the most disadvantaged extreme has 87.36 more events per 100,000 individuals of the base population compared to the most advantaged extreme. Additionally, this difference is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator and the base population to the denominator. The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 11 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            125.               60.3              27019                   -60.3 #>  2            118.               50                12620                   -50   #>  3            134.               48.4               5920                   -48.4 #>  4             89.5              40                18864                   -40   #>  5            106.               37.5              10315                   -37.5 #>  6            107.               33.2              11087                   -33.2 #>  7             72.3              31.7              15106                   -31.7 #>  8             66.7              29.6               4477                   -29.6 #>  9            118.               29.4              32682                   -29.4 #> 10            164.               29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 7 more variables: pop_use <dbl>, social_position <dbl>, #> #   pred_model_poisson <dbl>, pred_model_negbin <dbl>, pred_model_linear <dbl>, #> #   pred_model_linear_lny <dbl>, final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        128.42651 #> 2       0.02400413        125.07817        124.95932 #> 3       0.05922008        117.98946        120.04137 #> 4       0.07569132        133.89121        117.80804 #> 5       0.09770984         89.51137        114.88733 #> 6       0.12363295        106.20836        111.54135 #> 7       0.14264684        107.04728        109.14928 #> 8       0.16591714         72.30183        106.29142 #> 9       0.18331500         66.71114        104.20376 #> 10      0.21845899        118.40427        100.11089 #> 11      0.21845899        164.40608        100.11089 #> 12      0.28231926         88.89847         93.08075 #> 13      0.33096718         77.16475         88.05847 #> 14      0.37224569        118.86034         84.01008 #> 15      0.41852775         84.33125         79.69189 #> 16      0.44839543         39.79704         77.02375 #> 17      0.48058632         90.89876         74.24802 #> 18      0.52409386         78.54088         70.65476 #> 19      0.56515026         72.07666         67.42356 #> 20      0.61802171        101.88908         63.47922 #> 21      0.66964316         49.64123         59.85086 #> 22      0.70409507         35.49456         57.54545 #> 23      0.72140587         72.41130         56.42081 #> 24      0.72881260         53.35230         55.94635 #> 25      0.85247397         42.83889         48.58910 #> 26      0.98558366         67.27417         41.74722 #> 27      1.00000000               NA         41.06663 #>   # Example with proportion indicator data(data2) sii_luna(   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   health_indicator_type    = \"proportion\",   models = c('quasibinomial', 'linear logit(y)'),   model_evaluation_metric = 'MSE',   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> $summary_table #>                 inequality_metric selected_model  estimate  ci_lower ci_upper #> 1 Slope index of inequality (SII)  quasibinomial 0.3514527 0.2298394 0.473066 #>  #> $interpretation #> [1] \"The Slope Index of Inequality is 35.15 percentage points (pp), 95%CI [22.98pp; 47.31pp]. This means that the health indicator is higher at the most advantaged extreme. In absolute terms, the difference in the health indicator between the most advantaged extreme and the most disadvantaged extreme is 35.15 percentage points. Additionally, this difference is statistically significant.\" #>  #> $note #> [1] \"Note: Indicator in proportions (0-1). The disadvantaged extreme = posicion_social 0; advantaged = 1.\" #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 12 #>    health_indicator equity_stratifier population_weights equity_stratifier_order #>               <dbl>             <dbl>              <dbl>                   <dbl> #>  1            0.568              60.3              27019                   -60.3 #>  2            0.774              50                12620                   -50   #>  3            0.878              48.4               5920                   -48.4 #>  4            0.839              40                18864                   -40   #>  5            0.613              37.5              10315                   -37.5 #>  6            0.805              33.2              11087                   -33.2 #>  7            0.918              31.7              15106                   -31.7 #>  8            0.975              29.6               4477                   -29.6 #>  9            0.658              29.4              32682                   -29.4 #> 10            0.932              29.4               2399                   -29.4 #> # ℹ 15 more rows #> # ℹ 8 more variables: pop_use <dbl>, social_position <dbl>, #> #   pred_model_binomial <dbl>, pred_model_quasi <dbl>, pred_model_linear <dbl>, #> #   pred_model_linear_lny <dbl>, pred_model_linear_logit <dbl>, #> #   final_model_pred <dbl> #>  #> $data_with_extremes #>    social_position health_indicator final_model_pred #> 1       0.00000000               NA        0.6298757 #> 2       0.02400413           0.5680        0.6488580 #> 3       0.05922008           0.7740        0.6758624 #> 4       0.07569132           0.8780        0.6881150 #> 5       0.09770984           0.8390        0.7040898 #> 6       0.12363295           0.6130        0.7222744 #> 7       0.14264684           0.8050        0.7351661 #> 8       0.16591714           0.9180        0.7504129 #> 9       0.18331500           0.9751        0.7614225 #> 10      0.21845899           0.6580        0.7826278 #> 11      0.21845899           0.9322        0.7826278 #> 12      0.28231926           0.8040        0.8175895 #> 13      0.33096718           0.9280        0.8411719 #> 14      0.37224569           0.7460        0.8591887 #> 15      0.41852775           0.8450        0.8773236 #> 16      0.44839543           0.9740        0.8879309 #> 17      0.48058632           0.9410        0.8984573 #> 18      0.52409386           0.8880        0.9112861 #> 19      0.56515026           0.8720        0.9220314 #> 20      0.61802171           0.8510        0.9341116 #> 21      0.66964316           0.9410        0.9442075 #> 22      0.70409507           0.9920        0.9501160 #> 23      0.72140587           0.9551        0.9528563 #> 24      0.72881260           0.9801        0.9539846 #> 25      0.85247397           0.9884        0.9694053 #> 26      0.98558366           0.9920        0.9804004 #> 27      1.00000000               NA        0.9813284 #>"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Absolute Concentration Index (two input modes and two methods) — aci_luna","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"Computes Absolute Concentration Index quantify socioeconomic-related inequalities health indicator. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), used disaggregated data available. ACI estimated using either Fuller method (area symmetric Lorenz curve) Wagstaff & Kakwani method (regression approach). function also provides automatic interpretations results four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"","code":"aci_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   calculation_method = NULL,   smoothing_factor = NULL,   integration_method = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). calculation_method Character string specifying method used compute ACI. Allowed values \"Fuller\" (smoothed Lorenz curve approach) \"WK\" (Wagstaff & Kakwani regression approach). Default \"WK\". smoothing_factor Numeric scalar (e.g., 0.5) controlling smoothness curve. Used calculation_method = \"WK\"; ignored otherwise. integration_method Character string specifying optimization algorithm parameter estimation calculation_method = \"Fuller\". Allowed values include \"BFGS\", \"CG\", \"Nelder-Mead\", \"L-BFGS-B\", \"nlm\", \"nlminb\", \"spg\", \"ucminf\", \"Rcgmin\", \"Rvmmin\", \"newuoa\", \"bobyqa\", \"nmkb\", \"hjkb\". Default \"BFGS\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level ACI estimate. Default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"list following components: summary tibble Absolute Concentration Index estimate (estimate), confidence interval bounds (ci_lower, ci_upper), method used (method). interpretation Character string automatic interpretation result selected language. note Character string explanatory note selected language, based type health indicator. global_health_mean Overall mean health indicator: weighted average (Mode B) global rate (Mode ). data Final tibble used calculation, including processed variables estimated Lorenz curve.","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"estimation-methods","dir":"Reference","previous_headings":"","what":"Estimation methods","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"Absolute Concentration Index (ACI) can estimated using two methods: Wagstaff & Kakwani (WK) method method estimates ACI directly observed data without assuming specific functional form concentration curve. ACI computed using formula: $$\\mathrm{ACI} \\;=\\; \\sum_j p_j \\cdot (2X_j - 1) \\cdot y_j$$ \\(p_j\\) population share subgroup \\(j\\); \\(y_j\\) value health indicator subgroup \\(j\\); \\(X_j\\) relative rank subgroup \\(j\\), calculated \\(X_j = \\sum_{=1}^{j} p_i - 0.5\\,p_j\\). Fuller method method estimates ACI fitting symmetric Lorenz curve (Murray, 1996). Lorenz function : $$y = \\frac{1}{\\left( \\frac{1}{e^{k - 1}} - 1 \\right)} \\left( e^{\\frac{x}{k - x}} - 1 \\right)$$ \\(x\\) cumulative population share; \\(y\\) cumulative health indicator share; \\(k\\) shape parameter estimated minimizing squared error observed fitted values. ACI corresponds area fitted curve line equality, scaled mean health indicator.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"Mode B developed alternative situations aggregated health indicators (e.g., proportions rates) available, disaggregated data (numerator denominator) accessible. Although Mode precise, Mode B still allows valid inequality comparisons summary data available.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/aci_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Absolute Concentration Index (two input modes and two methods) — aci_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Health indicator: Rate. Suppose data1 with: #   maternal_deaths  = number of maternal deaths. #   live_births      = number of live births. #   ubn_percent      = % of population with at least one unmet basic need (higher = worse social status). data(data1) aci_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   calculation_method       = \"WK\",   smoothing_factor         = 0.6,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method             #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>              #> 1 Absolute concentration index    -13.6    -17.9    -9.39 Wagstaff & Kakwani #>  #> $interpretation #> [1] \"The Absolute Concentration Index is -13.63, 95%CI [-17.87; -9.39]. This means that the health indicator is concentrated among the most disadvantaged. In absolute terms, 13.63 events per 100,000 people in the base population are concentrated in the most disadvantaged groups, compared to a scenario with no socioeconomic differences. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator of the health indicator, and the base population to its denominator. For example, in the case of the maternal mortality ratio (MMR), events refer to maternal deaths and the base population refers to live births.\" #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            125.               60.3                0.0479          0.0239 #>  2            118.               50                  0.0703          0.0591 #>  3            134.               48.4                0.0808          0.0756 #>  4             89.5              40                  0.114           0.0976 #>  5            106.               37.5                0.133           0.123  #>  6            107.               33.2                0.152           0.142  #>  7             72.3              31.7                0.179           0.166  #>  8             66.7              29.6                0.187           0.183  #>  9            118.               29.4                0.245           0.218  #> 10            164.               29.4                0.249           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # Health indicator: Proportion. Suppose data2 with: #   skilled_births   = number of births attended by skilled personnel. #   total_births     = total number of births. #   ubn_index        = % of population with at least one unmet basic need (higher = worse social status). data(data2) aci_luna(   health_indicator_type    = \"proportion\",   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   calculation_method       = \"Fuller\",   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>  #> 1 Absolute concentration index   0.0562   0.0233   0.0890 Fuller #>  #> $interpretation #> [1] \"The Absolute Concentration Index is 5.62pp, 95%CI [2.33pp; 8.9pp]. This means that the health indicator is concentrated among the most advantaged. In absolute terms, 5.62 percentage points of the health indicator are concentrated in the most advantaged groups, compared to a scenario with no socioeconomic differences. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: The health indicator value corresponds to the evaluated proportion. For example: Proportion of births attended by skilled health personnel.\" #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            0.568              60.3                0.0479          0.0239 #>  2            0.774              50                  0.0703          0.0591 #>  3            0.878              48.4                0.0808          0.0756 #>  4            0.839              40                  0.114           0.0976 #>  5            0.613              37.5                0.133           0.123  #>  6            0.805              33.2                0.152           0.142  #>  7            0.918              31.7                0.179           0.166  #>  8            0.975              29.6                0.187           0.183  #>  9            0.658              29.4                0.245           0.218  #> 10            0.932              29.4                0.249           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Suppose data1 with: #   mmr       = maternal mortality ratio per 100,000 live births. #   population = population weight of the unit of analysis. #   ubn_index = % of population with at least one unmet basic need. data(data1) aci_luna(   health_indicator_type    = \"rate\",   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   calculation_method       = \"WK\",   smoothing_factor         = 0.6,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method             #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>              #> 1 Absolute concentration index    -13.6    -17.9    -9.37 Wagstaff & Kakwani #>  #> $interpretation #> [1] \"The Absolute Concentration Index is -13.62, 95%CI [-17.86; -9.37]. This means that the health indicator is concentrated among the most disadvantaged. In absolute terms, 13.62 events per 100,000 people in the base population are concentrated in the most disadvantaged groups, compared to a scenario with no socioeconomic differences. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: Events correspond to the numerator of the health indicator, and the base population to its denominator. For example, in the case of the maternal mortality ratio (MMR), events refer to maternal deaths and the base population refers to live births.\" #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            125.               60.3                0.0480          0.0240 #>  2            118.               50                  0.0704          0.0592 #>  3            134.               48.4                0.0810          0.0757 #>  4             89.5              40                  0.114           0.0977 #>  5            106.               37.5                0.133           0.124  #>  6            107.               33.2                0.152           0.143  #>  7             72.3              31.7                0.179           0.166  #>  8             66.7              29.6                0.187           0.183  #>  9            118.               29.4                0.245           0.218  #> 10            164.               29.4                0.250           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # Suppose data2 with: #   skilled_births_prop = proportion of births attended by skilled personnel (in [0,1]). #   population           = population weight of the unit of analysis. #   ubn_index            = % of population with at least one unmet basic need. data(data2) aci_luna(   health_indicator_type    = \"proportion\",   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   calculation_method       = \"Fuller\",   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>  #> 1 Absolute concentration index   0.0561   0.0233   0.0890 Fuller #>  #> $interpretation #> [1] \"The Absolute Concentration Index is 5.61pp, 95%CI [2.33pp; 8.9pp]. This means that the health indicator is concentrated among the most advantaged. In absolute terms, 5.61 percentage points of the health indicator are concentrated in the most advantaged groups, compared to a scenario with no socioeconomic differences. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: The health indicator value corresponds to the evaluated proportion. For example: Proportion of births attended by skilled health personnel.\" #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            0.568              60.3                0.0480          0.0240 #>  2            0.774              50                  0.0704          0.0592 #>  3            0.878              48.4                0.0810          0.0757 #>  4            0.839              40                  0.114           0.0977 #>  5            0.613              37.5                0.133           0.124  #>  6            0.805              33.2                0.152           0.143  #>  7            0.918              31.7                0.179           0.166  #>  8            0.975              29.6                0.187           0.183  #>  9            0.658              29.4                0.245           0.218  #> 10            0.932              29.4                0.250           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":null,"dir":"Reference","previous_headings":"","what":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"Computes Relative Concentration Index quantify socioeconomic-related inequalities health indicator. function operates two modes: (Mode ) using numerator denominator (health_numerator health_denominator), preferred accurate method relies directly event counts; (Mode B) using aggregated health indicator (health_indicator) population weights (population_weights), used disaggregated data available. RCI estimated using either Fuller method (area fitted symmetric Lorenz curve) Wagstaff & Kakwani method (regression approach). Optionally, function computes correction variants (Wagstaff adjustment Erreygers correction) health indicator bounded (e.g., proportion) . function provides automatic interpretations four languages: Spanish, English, French, Portuguese.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"","code":"rci_luna(   health_indicator_type = NULL,   health_indicator = NULL,   population_weights = NULL,   health_numerator = NULL,   health_denominator = NULL,   equity_stratifier = NULL,   higher_ineq_is_favorable = NULL,   rate_scaling_factor = NULL,   calculation_method = NULL,   apply_corrections = NULL,   smoothing_factor = NULL,   integration_method = NULL,   conf_level = NULL,   language_interpretation = NULL )"},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"health_indicator_type Character string: either \"proportion\" bounded indicators \\([0,1]\\), \"rate\" already scaled (e.g., deaths per 100,000); required cases. health_indicator Numeric vector health indicator values (e.g., c(0.12, 0.34) proportions c(120, 345) rates); aggregated value per unit; used Mode B. population_weights Numeric vector > 0 representing population size weight per unit (e.g., c(1000, 5000, 1200)); used Mode B. health_numerator Numeric vector event counts (e.g., c(5, 12, 8) deaths); used Mode preferred robust estimation. health_denominator Numeric vector > 0 associated health_numerator (e.g., c(500, 1000, 800) representing population risk); used Mode . equity_stratifier Numeric vector representing social stratifier (e.g., poverty rate, education index); required cases. higher_ineq_is_favorable Logical; TRUE higher values equity_stratifier indicate better social conditions (e.g., Gross Domestic Product per capita), FALSE indicate worse conditions (e.g., Unsatisfied Basic Needs). rate_scaling_factor Numeric scalar > 0 applied health_indicator_type = \"rate\"; commonly 1000 100000 (e.g., maternal mortality ratio per 100000 live births). calculation_method Character string specifying method used compute RCI. Allowed values \"Fuller\" (smoothed Lorenz curve approach) \"WK\" (Wagstaff & Kakwani regression/smoothing approach). Default \"WK\". apply_corrections Logical; TRUE compute additional corrected indices (Wagstaff adjustment Erreygers correction) addition standard RCI; default FALSE. smoothing_factor Numeric scalar (e.g., 0.5) controlling smoothness concentration curve. Used calculation_method = \"WK\"; ignored otherwise. integration_method Character string specifying optimization algorithm parameter estimation calculation_method = \"Fuller\". Allowed values include \"BFGS\", \"CG\", \"Nelder-Mead\", \"L-BFGS-B\", \"nlm\", \"nlminb\", \"spg\", \"ucminf\", \"Rcgmin\", \"Rvmmin\", \"newuoa\", \"bobyqa\", \"nmkb\", \"hjkb\". Default \"BFGS\". conf_level Numeric scalar 0 1 (e.g., 0.95) specifying confidence level RCI estimate. Default 0.95. language_interpretation Character string indicating desired output language interpretation note; allowed values \"en\", \"es\", \"fr\", \"pt\" full names (\"english\", \"spanish\", \"french\", \"portuguese\"); default \"en\".","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"list following components: summary tibble one rows containing: RCI estimate(s) (estimate), confidence interval bounds (ci_lower, ci_upper), short metric label method used. apply_corrections = TRUE additional rows Wagstaff Erreygers adjustments included. interpretation Character string (character vector corrections applied) automatic interpretation result(s) selected language. note Character string explanatory note selected language, based type health indicator. global_health_mean Overall mean health indicator: weighted average (Mode B) global rate (Mode ). data Final tibble used calculation, including processed variables estimated concentration/Lorenz curve.","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"estimation-methods","dir":"Reference","previous_headings":"","what":"Estimation methods","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"Relative Concentration Index (RCI) can estimated using two methods: Wagstaff & Kakwani (WK) method method estimates index observed distribution smoothing empirical concentration curve fitting linear regression obtain RCI. discrete expression used summarise concentration $$\\mathrm{RCI} \\;=\\; \\frac{\\sum_j p_j \\cdot (2X_j - 1) \\cdot y_j}{\\mu}$$ \\(p_j\\) population share subgroup \\(j\\); \\(y_j\\) value health indicator subgroup \\(j\\); \\(X_j\\) relative rank subgroup \\(j\\), calculated \\(X_j = \\sum_{=1}^{j} p_i - 0.5\\,p_j\\); \\(\\mu\\) denotes global mean health indicator. fitted regression provides RCI estimate confidence interval. Fuller method method fits symmetric Lorenz-type curve cumulative distribution derives RCI relative area fitted curve line equality. curve used $$y = \\frac{1}{\\left( \\frac{1}{e^{k - 1}} - 1 \\right)} \\left( e^{\\frac{x}{k - x}} - 1 \\right)$$ \\(x\\) denotes cumulative population share, \\(y\\) denotes cumulative health indicator share, \\(k\\) shape parameter estimated minimizing squared deviations observed fitted values. RCI corresponds area fitted curve line equality.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"correction-methods","dir":"Reference","previous_headings":"","what":"Correction methods","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"requested, function returns two corrected indices derived standard RCI: Wagstaff adjustment Erreygers correction. Wagstaff adjustment implemented \\(RCI_{Wagstaff} = RCI / (1 - \\mu)\\), \\(\\mu\\) denotes global mean health indicator; rescales RCI account upper bounds imposed mean indicator bounded. Erreygers correction implemented \\(RCI_{Erreygers} = RCI \\times (4\\mu)\\), producing absolute-scale index (percentage points \\(\\mu\\) proportion) suitable comparisons bounded indicators. Users consult original references methodological details.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"Mode B approximation used aggregated indicators population weights available; variance estimates may less precise Mode (numerator/denominator).","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"World Health Organization. Handbook health inequality monitoring special focus low- middle-income countries. 2013. Available : https://www..int/publications//item/9789241548632","code":""},{"path":[]},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"Adrián Vázquez-Mejía, MD MSc(c) (apvasquez.md@gmail.com)  Independent Consultant Oscar J. Mújica, MD MPH (mujicaos@paho.org)  Pan American Health Organization (PAHO), Washington D.C. Antonio Sanhueza, PhD (sanhueza@paho.org)  Pan American Health Organization (PAHO), Washington D.C.","code":""},{"path":"https://adrianvas1995.github.io/lunaineq/reference/rci_luna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Relative Concentration Index (two input modes and optional corrections) — rci_luna","text":"","code":"# ——— Mode A (preferred: numerator and denominator) ———  # Health indicator: Rate. Suppose data1 with: #   maternal_deaths  = number of maternal deaths. #   live_births      = number of live births. #   ubn_percent      = % of population with at least one unmet basic need (higher = worse social status). data(data1) rci_luna(   health_indicator_type    = \"rate\",   health_numerator         = data1$maternal_deaths,   health_denominator       = data1$live_births,   equity_stratifier        = data1$ubn_percent,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   calculation_method       = \"WK\",   smoothing_factor         = 0.6,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `apply_corrections` not provided: defaulting to FALSE. #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method             #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>              #> 1 Relative concentration index   -0.173   -0.227   -0.119 Wagstaff & Kakwani #>  #> $interpretation #> [1] \"The Relative Concentration Index is -17.34%, 95%CI [-22.74%; -11.95%]. This means that the Health Indicator is concentrated among the most disadvantaged. In relative terms, the concentration among the most disadvantaged corresponds to 17.34% of the maximum possible concentration. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: The maximum possible concentration would occur if the entire Health Indicator were concentrated among the most disadvantaged group.\" #>  #> $global_health_mean #> [1] 78.58214 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            125.               60.3                0.0479          0.0239 #>  2            118.               50                  0.0703          0.0591 #>  3            134.               48.4                0.0808          0.0756 #>  4             89.5              40                  0.114           0.0976 #>  5            106.               37.5                0.133           0.123  #>  6            107.               33.2                0.152           0.142  #>  7             72.3              31.7                0.179           0.166  #>  8             66.7              29.6                0.187           0.183  #>  9            118.               29.4                0.245           0.218  #> 10            164.               29.4                0.249           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # Health indicator: Proportion. Suppose data2 with: #   skilled_births   = number of births attended by skilled personnel. #   total_births     = total number of births. #   ubn_index        = % of population with at least one unmet basic need (higher = worse social status). data(data2) rci_luna(   health_indicator_type    = \"proportion\",   health_numerator         = data2$skilled_births,   health_denominator       = data2$total_births,   equity_stratifier        = data2$ubn_percent,   higher_ineq_is_favorable = FALSE,   calculation_method       = \"Fuller\",   apply_corrections        = TRUE,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 3 × 5 #>   metric                                       estimate ci_lower ci_upper method #>   <chr>                                           <dbl>    <dbl>    <dbl> <chr>  #> 1 Relative concentration index                   0.0645   0.0242    0.105 Fuller #> 2 Relative concentration index (Wagstaff adj.)   0.500    0.188     0.813 Fuller #> 3 Relative concentration index (Erreygers adj…   0.225    0.225     0.365 Fuller #>  #> $interpretation #> [1] \"The Relative Concentration Index (Standard) is 6.45%, 95%CI [2.42%; 10.48%]. This means that the Health Indicator is concentrated among the most advantaged. In relative terms, the concentration among the most advantaged corresponds to 6.45% of the maximum possible concentration. Moreover, this concentration is statistically significant.\"                                                                  #> [2] \"The Wagstaff Concentration Index is 50.04%, 95%CI [18.75%; 81.33%]. This positive value indicates concentration of the indicator among the most advantaged groups. In relative terms, the magnitude corresponds to 50.04% of the maximum feasible inequality given the mean of the indicator. Moreover, the estimated inequality is statistically significant.\"                                                      #> [3] \"The Erreygers Concentration Index is 22.46 pp, 95%CI [22.46 pp; 36.51 pp]. This positive value implies that, across the socioeconomic gradient, the health indicator is on average 22.46 percentage points higher among the upper socioeconomic strata than among the lower strata, reflecting a pro-rich absolute concentration of the indicator. Moreover, the estimated inequality is statistically significant.\" #>  #> $note #> [1] \"Note: The maximum possible concentration would occur if the entire Health Indicator were concentrated among the most advantaged group.\" #>  #> $global_health_mean #> [1] 0.8711922 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            0.568              60.3                0.0479          0.0239 #>  2            0.774              50                  0.0703          0.0591 #>  3            0.878              48.4                0.0808          0.0756 #>  4            0.839              40                  0.114           0.0976 #>  5            0.613              37.5                0.133           0.123  #>  6            0.805              33.2                0.152           0.142  #>  7            0.918              31.7                0.179           0.166  #>  8            0.975              29.6                0.187           0.183  #>  9            0.658              29.4                0.245           0.218  #> 10            0.932              29.4                0.249           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # ——— Mode B (aggregated indicator + population as weight) ———  # Suppose data1 with: #   mmr       = maternal mortality ratio per 100,000 live births. #   population = population weight of the unit of analysis. #   ubn_index = % of population with at least one unmet basic need. data(data1) rci_luna(   health_indicator_type    = \"rate\",   health_indicator         = data1$mmr,   equity_stratifier        = data1$ubn_percent,   population_weights       = data1$population_zone,   higher_ineq_is_favorable = FALSE,   rate_scaling_factor      = 100000,   calculation_method       = \"WK\",   smoothing_factor         = 0.6,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `apply_corrections` not provided: defaulting to FALSE. #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 1 × 5 #>   metric                       estimate ci_lower ci_upper method             #>   <chr>                           <dbl>    <dbl>    <dbl> <chr>              #> 1 Relative concentration index   -0.173   -0.227   -0.119 Wagstaff & Kakwani #>  #> $interpretation #> [1] \"The Relative Concentration Index is -17.32%, 95%CI [-22.71%; -11.92%]. This means that the Health Indicator is concentrated among the most disadvantaged. In relative terms, the concentration among the most disadvantaged corresponds to 17.32% of the maximum possible concentration. Moreover, this concentration is statistically significant.\" #>  #> $note #> [1] \"Note: The maximum possible concentration would occur if the entire Health Indicator were concentrated among the most disadvantaged group.\" #>  #> $global_health_mean #> [1] 78.63539 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            125.               60.3                0.0480          0.0240 #>  2            118.               50                  0.0704          0.0592 #>  3            134.               48.4                0.0810          0.0757 #>  4             89.5              40                  0.114           0.0977 #>  5            106.               37.5                0.133           0.124  #>  6            107.               33.2                0.152           0.143  #>  7             72.3              31.7                0.179           0.166  #>  8             66.7              29.6                0.187           0.183  #>  9            118.               29.4                0.245           0.218  #> 10            164.               29.4                0.250           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>   # Suppose data2 with: #   skilled_births_prop = proportion of births attended by skilled personnel (in [0,1]). #   population           = population weight of the unit of analysis. #   ubn_index            = % of population with at least one unmet basic need. data(data2) rci_luna(   health_indicator_type    = \"proportion\",   health_indicator         = data2$skilled_births_prop,   equity_stratifier        = data2$ubn_percent,   population_weights       = data2$population,   higher_ineq_is_favorable = FALSE,   calculation_method       = \"Fuller\",   apply_corrections        = TRUE,   conf_level               = 0.95,   language_interpretation  = \"en\" ) #> Warning: `integration_method` not provided: defaulting to 'BFGS'. #> $summary #> # A tibble: 3 × 5 #>   metric                                       estimate ci_lower ci_upper method #>   <chr>                                           <dbl>    <dbl>    <dbl> <chr>  #> 1 Relative concentration index                   0.0645   0.0241    0.105 Fuller #> 2 Relative concentration index (Wagstaff adj.)   0.500    0.187     0.812 Fuller #> 3 Relative concentration index (Erreygers adj…   0.225    0.225     0.365 Fuller #>  #> $interpretation #> [1] \"The Relative Concentration Index (Standard) is 6.45%, 95%CI [2.41%; 10.48%]. This means that the Health Indicator is concentrated among the most advantaged. In relative terms, the concentration among the most advantaged corresponds to 6.45% of the maximum possible concentration. Moreover, this concentration is statistically significant.\"                                                                  #> [2] \"The Wagstaff Concentration Index is 49.96%, 95%CI [18.7%; 81.22%]. This positive value indicates concentration of the indicator among the most advantaged groups. In relative terms, the magnitude corresponds to 49.96% of the maximum feasible inequality given the mean of the indicator. Moreover, the estimated inequality is statistically significant.\"                                                       #> [3] \"The Erreygers Concentration Index is 22.46 pp, 95%CI [22.46 pp; 36.51 pp]. This positive value implies that, across the socioeconomic gradient, the health indicator is on average 22.46 percentage points higher among the upper socioeconomic strata than among the lower strata, reflecting a pro-rich absolute concentration of the indicator. Moreover, the estimated inequality is statistically significant.\" #>  #> $note #> [1] \"Note: The maximum possible concentration would occur if the entire Health Indicator were concentrated among the most advantaged group.\" #>  #> $global_health_mean #> [1] 0.8709839 #>  #> $data #> # A tibble: 25 × 6 #>    health_indicator equity_stratifier cumulative_population social_position #>               <dbl>             <dbl>                 <dbl>           <dbl> #>  1            0.568              60.3                0.0480          0.0240 #>  2            0.774              50                  0.0704          0.0592 #>  3            0.878              48.4                0.0810          0.0757 #>  4            0.839              40                  0.114           0.0977 #>  5            0.613              37.5                0.133           0.124  #>  6            0.805              33.2                0.152           0.143  #>  7            0.918              31.7                0.179           0.166  #>  8            0.975              29.6                0.187           0.183  #>  9            0.658              29.4                0.245           0.218  #> 10            0.932              29.4                0.250           0.218  #> # ℹ 15 more rows #> # ℹ 2 more variables: cumulative_event_health <dbl>, func_lorenz <dbl> #>"}]
